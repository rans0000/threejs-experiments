var e=globalThis,t={},i={},s=e.parcelRequire03bf;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in i){var s=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,s.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},e.parcelRequire03bf=s),(0,s.register)("7MGRS",function(e,t){Object.defineProperty(e.exports,"default",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});var i=function(){var e=0,t=document.createElement("div");function s(e){return t.appendChild(e.dom),e}function r(i){for(var s=0;s<t.children.length;s++)t.children[s].style.display=s===i?"block":"none";e=i}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(i){i.preventDefault(),r(++e%t.children.length)},!1);var n=(performance||Date).now(),o=n,a=0,l=s(new i.Panel("FPS","#0ff","#002")),h=s(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=s(new i.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:t,addPanel:s,showPanel:r,begin:function(){n=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(h.update(e-n,200),e>=o+1e3&&(l.update(1e3*a/(e-o),100),o=e,a=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){n=this.end()},domElement:t,setMode:r}};i.Panel=function(e,t,i){var s=1/0,r=0,n=Math.round,o=n(window.devicePixelRatio||1),a=80*o,l=48*o,h=3*o,c=2*o,d=3*o,u=15*o,p=74*o,m=30*o,g=document.createElement("canvas");g.width=a,g.height=l,g.style.cssText="width:80px;height:48px";var f=g.getContext("2d");return f.font="bold "+9*o+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=i,f.fillRect(0,0,a,l),f.fillStyle=t,f.fillText(e,h,c),f.fillRect(d,u,p,m),f.fillStyle=i,f.globalAlpha=.9,f.fillRect(d,u,p,m),{dom:g,update:function(l,A){s=Math.min(s,l),r=Math.max(r,l),f.fillStyle=i,f.globalAlpha=1,f.fillRect(0,0,a,u),f.fillStyle=t,f.fillText(n(l)+" "+e+" ("+n(s)+"-"+n(r)+")",h,c),f.drawImage(g,d+o,u,p-o,m,d,u,p-o,m),f.fillRect(d+p-o,u,o,m),f.fillStyle=i,f.globalAlpha=.9,f.fillRect(d+p-o,u,o,n((1-l/A)*m))}}};var s=i});var r=(s("2LLMu"),s("2LLMu")),n=(s("ilwiq"),s("ilwiq"),s("ilwiq"));function o(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==n.TriangleFanDrawMode&&t!==n.TriangleStripDrawMode)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let i=e.getIndex();if(null===i){let t=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}let s=i.count-2,r=[];if(t===n.TriangleFanDrawMode)for(let e=1;e<=s;e++)r.push(i.getX(0)),r.push(i.getX(e)),r.push(i.getX(e+1));else for(let e=0;e<s;e++)e%2==0?(r.push(i.getX(e)),r.push(i.getX(e+1)),r.push(i.getX(e+2))):(r.push(i.getX(e+2)),r.push(i.getX(e+1)),r.push(i.getX(e)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=e.clone();return o.setIndex(r),o.clearGroups(),o}}class a extends n.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new p(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new E(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new f(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new u(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new x(e)}),this.register(function(e){return new c(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new R(e)})}load(e,t,i,s){let r;let o=this;if(""!==this.resourcePath)r=this.resourcePath;else if(""!==this.path){let t=(0,n.LoaderUtils).extractUrlBase(e);r=(0,n.LoaderUtils).resolveURL(t,this.path)}else r=(0,n.LoaderUtils).extractUrlBase(e);this.manager.itemStart(e);let a=function(t){s?s(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new n.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(i){try{o.parse(i,r,function(i){t(i),o.manager.itemEnd(e)},a)}catch(e){a(e)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;let n={},o={},a=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(a.decode(new Uint8Array(e,0,4))===L){try{n[h.KHR_BINARY_GLTF]=new M(e)}catch(e){s&&s(e);return}r=JSON.parse(n[h.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2){s&&s(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new q(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,n[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){let t=r.extensionsUsed[e],i=r.extensionsRequired||[];switch(t){case h.KHR_MATERIALS_UNLIT:n[t]=new d;break;case h.KHR_DRACO_MESH_COMPRESSION:n[t]=new C(r,this.dracoLoader);break;case h.KHR_TEXTURE_TRANSFORM:n[t]=new I;break;case h.KHR_MESH_QUANTIZATION:n[t]=new k;break;default:i.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(n),l.setPlugins(o),l.parse(i,s)}parseAsync(e,t){let i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function l(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const h={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class c{constructor(e){this.parser=e,this.name=h.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t;let i=this.parser,s="light:"+e,r=i.cache.get(s);if(r)return r;let o=i.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l=new n.Color(16777215);void 0!==a.color&&l.setRGB(a.color[0],a.color[1],a.color[2],n.LinearSRGBColorSpace);let h=void 0!==a.range?a.range:0;switch(a.type){case"directional":(t=new n.DirectionalLight(l)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new n.PointLight(l)).distance=h;break;case"spot":(t=new n.SpotLight(l)).distance=h,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,t.angle=a.spot.outerConeAngle,t.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return t.position.set(0,0,0),t.decay=2,z(t,a),void 0!==a.intensity&&(t.intensity=a.intensity),t.name=i.createUniqueName(a.name||"light_"+e),r=Promise.resolve(t),i.cache.add(s,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,s=i.json.nodes[e],r=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return i._getNodeRef(t.cache,r,e)})}}class d{constructor(){this.name=h.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(e,t,i){let s=[];e.color=new n.Color(1,1,1),e.opacity=1;let r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){let t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],n.LinearSRGBColorSpace),e.opacity=t[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(e,"map",r.baseColorTexture,n.SRGBColorSpace))}return Promise.all(s)}}class u{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){let e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(e,e)}return Promise.all(r)}}class m{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.iridescenceFactor&&(t.iridescence=n.iridescenceFactor),void 0!==n.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",n.iridescenceTexture)),void 0!==n.iridescenceIor&&(t.iridescenceIOR=n.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==n.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=n.iridescenceThicknessMinimum),void 0!==n.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=n.iridescenceThicknessMaximum),void 0!==n.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",n.iridescenceThicknessTexture)),Promise.all(r)}}class g{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[];t.sheenColor=new n.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=s.extensions[this.name];if(void 0!==o.sheenColorFactor){let e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],n.LinearSRGBColorSpace)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,n.SRGBColorSpace)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class f{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.transmissionFactor&&(t.transmission=n.transmissionFactor),void 0!==n.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",n.transmissionTexture)),Promise.all(r)}}class A{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],o=s.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return t.attenuationColor=new(0,n.Color)().setRGB(a[0],a[1],a[2],n.LinearSRGBColorSpace),Promise.all(r)}}class v{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class w{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],o=s.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return t.specularColor=new(0,n.Color)().setRGB(a[0],a[1],a[2],n.LinearSRGBColorSpace),void 0!==o.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,n.SRGBColorSpace)),Promise.all(r)}}class x{constructor(e){this.parser=e,this.name=h.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return t.bumpScale=void 0!==n.bumpFactor?n.bumpFactor:1,void 0!==n.bumpTexture&&r.push(i.assignTexture(t,"bumpMap",n.bumpTexture)),Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.anisotropyStrength&&(t.anisotropy=n.anisotropyStrength),void 0!==n.anisotropyRotation&&(t.anisotropyRotation=n.anisotropyRotation),void 0!==n.anisotropyTexture&&r.push(i.assignTexture(t,"anisotropyMap",n.anisotropyTexture)),Promise.all(r)}}class y{constructor(e){this.parser=e,this.name=h.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;let r=s.extensions[this.name],n=t.options.ktx2Loader;if(!n){if(!(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,r.source,n)}}class E{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],o=s.images[n.source],a=i.textureLoader;if(o.uri){let e=i.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return i.loadTextureImage(e,n.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class _{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],o=s.images[n.source],a=i.textureLoader;if(o.uri){let e=i.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return i.loadTextureImage(e,n.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class T{constructor(e){this.name=h.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(!i.extensions||!i.extensions[this.name])return null;{let e=i.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return s.then(function(t){let i=e.byteOffset||0,s=e.byteLength||0,n=e.count,o=e.byteStride,a=new Uint8Array(t,i,s);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(n,o,a,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){let t=new ArrayBuffer(n*o);return r.decodeGltfBuffer(new Uint8Array(t),n,o,a,e.mode,e.filter),t})})}}}class R{constructor(e){this.name=h.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;for(let e of t.meshes[i.mesh].primitives)if(e.mode!==B.TRIANGLES&&e.mode!==B.TRIANGLE_STRIP&&e.mode!==B.TRIANGLE_FAN&&void 0!==e.mode)return null;let s=i.extensions[this.name].attributes,r=[],o={};for(let e in s)r.push(this.parser.getDependency("accessor",s[e]).then(t=>(o[e]=t,o[e])));return r.length<1?null:(r.push(this.parser.createNodeMesh(e)),Promise.all(r).then(e=>{let t=e.pop(),i=t.isGroup?t.children:[t],s=e[0].count,r=[];for(let e of i){let t=new n.Matrix4,i=new n.Vector3,a=new n.Quaternion,l=new n.Vector3(1,1,1),h=new n.InstancedMesh(e.geometry,e.material,s);for(let e=0;e<s;e++)o.TRANSLATION&&i.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&a.fromBufferAttribute(o.ROTATION,e),o.SCALE&&l.fromBufferAttribute(o.SCALE,e),h.setMatrixAt(e,t.compose(i,a,l));for(let t in o)if("_COLOR_0"===t){let e=o[t];h.instanceColor=new n.InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);(0,n.Object3D).prototype.copy.call(h,e),this.parser.assignFinalMaterial(h),r.push(h)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const L="glTF",S={JSON:1313821514,BIN:5130562};class M{constructor(e){this.name=h.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==L)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let s=this.header.length-12,r=new DataView(e,12),n=0;for(;n<s;){let t=r.getUint32(n,!0);n+=4;let s=r.getUint32(n,!0);if(n+=4,s===S.JSON){let s=new Uint8Array(e,12+n,t);this.content=i.decode(s)}else if(s===S.BIN){let i=12+n;this.body=e.slice(i,i+t)}n+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class C{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=h.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},h={};for(let e in o)a[G[e]||e.toLowerCase()]=o[e];for(let t in e.attributes){let s=G[t]||t.toLowerCase();if(void 0!==o[t]){let r=i.accessors[e.attributes[t]],n=N[r.componentType];h[s]=n.name,l[s]=!0===r.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,i){s.decodeDracoFile(e,function(e){for(let t in e.attributes){let i=e.attributes[t],s=l[t];void 0!==s&&(i.normalized=s)}t(e)},a,h,n.LinearSRGBColorSpace,i)})})}}class I{constructor(){this.name=h.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class k{constructor(){this.name=h.KHR_MESH_QUANTIZATION}}class P extends n.Interpolant{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let e=0;e!==s;e++)t[e]=i[r+e];return t}interpolate_(e,t,i,s){let r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,h=s-t,c=(i-t)/h,d=c*c,u=d*c,p=e*l,m=p-l,g=-2*u+3*d,f=u-d,A=1-g,v=f-d+c;for(let e=0;e!==o;e++){let t=n[m+e+o],i=n[m+e+a]*h,s=n[p+e+o],l=n[p+e]*h;r[e]=A*t+v*i+g*s+f*l}return r}}const O=new n.Quaternion;class D extends P{interpolate_(e,t,i,s){let r=super.interpolate_(e,t,i,s);return O.fromArray(r).normalize().toArray(r),r}}const B={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},F={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},H={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},V={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},j={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},U={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function K(e,t,i){for(let s in i.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=i.extensions[s])}function z(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function X(e){let t="",i=Object.keys(e).sort();for(let s=0,r=i.length;s<r;s++)t+=i[s]+":"+e[i[s]]+";";return t}function Y(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const W=new n.Matrix4;class q{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new l,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=(s=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||i||s&&r<98?this.textureLoader=new n.TextureLoader(this.options.manager):this.textureLoader=new n.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(t){let n={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:i,userData:{}};return K(r,n,s),z(n,s),Promise.all(i._invokeAll(function(e){return e.afterRoot&&e.afterRoot(n)})).then(function(){e(n)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i].joints;for(let t=0,i=s.length;t<i;t++)e[s[t]].isBone=!0}for(let t=0,s=e.length;t<s;t++){let s=e[t];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let s=i.clone(),r=(e,t)=>{let i=this.associations.get(e);for(let[s,n]of(null!=i&&this.associations.set(t,i),e.children.entries()))r(n,t.children[s])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let s=e(t[i]);if(s)return s}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let s=0;s<t.length;s++){let r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){let i=e+":"+t,s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":s=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(!(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[h.KHR_BINARY_GLTF].body);let s=this.options;return new Promise(function(e,r){i.load((0,n.LoaderUtils).resolveURL(t.uri,s.path),e,void 0,function(){r(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let i=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+i)})}loadAccessor(e){let t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){let e=$[s.type],t=N[s.componentType],i=!0===s.normalized,r=new t(s.count*e);return Promise.resolve(new n.BufferAttribute(r,e,i))}let r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(e){let r,o;let a=e[0],l=$[s.type],h=N[s.componentType],c=h.BYTES_PER_ELEMENT,d=c*l,u=s.byteOffset||0,p=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,m=!0===s.normalized;if(p&&p!==d){let e=Math.floor(u/p),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count,d=t.cache.get(i);d||(r=new h(a,e*p,s.count*p/c),d=new n.InterleavedBuffer(r,p/c),t.cache.add(i,d)),o=new n.InterleavedBufferAttribute(d,l,u%p/c,m)}else r=null===a?new h(s.count*l):new h(a,u,s.count*l),o=new n.BufferAttribute(r,l,m);if(void 0!==s.sparse){let t=$.SCALAR,i=N[s.sparse.indices.componentType],r=s.sparse.indices.byteOffset||0,c=s.sparse.values.byteOffset||0,d=new i(e[1],r,s.sparse.count*t),u=new h(e[2],c,s.sparse.count*l);null!==a&&(o=new n.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(let e=0,t=d.length;e<t;e++){let t=d[e];if(o.setX(t,u[e*l]),l>=2&&o.setY(t,u[e*l+1]),l>=3&&o.setZ(t,u[e*l+2]),l>=4&&o.setW(t,u[e*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})}loadTexture(e){let t=this.json,i=this.options,s=t.textures[e].source,r=t.images[s],n=this.textureLoader;if(r.uri){let e=i.manager.getHandler(r.uri);null!==e&&(n=e)}return this.loadTextureImage(e,s,n)}loadTextureImage(e,t,i){let s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let h=this.loadImageSource(t,i).then(function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);let i=(r.samplers||{})[o.sampler]||{};return t.magFilter=F[i.magFilter]||n.LinearFilter,t.minFilter=F[i.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=H[i.wrapS]||n.RepeatWrapping,t.wrapT=H[i.wrapT]||n.RepeatWrapping,s.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=h,h}loadImageSource(e,t){let i=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let r=i.images[e],o=self.URL||self.webkitURL,a=r.uri||"",l=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then(function(e){l=!0;let t=new Blob([e],{type:r.mimeType});return a=o.createObjectURL(t)});else if(void 0===r.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let h=Promise.resolve(a).then(function(e){return new Promise(function(i,r){let o=i;!0===t.isImageBitmapLoader&&(o=function(e){let t=new n.Texture(e);t.needsUpdate=!0,i(t)}),t.load((0,n.LoaderUtils).resolveURL(e,s.path),o,void 0,r)})}).then(function(e){var t;return!0===l&&o.revokeObjectURL(a),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=h,h}assignTexture(e,t,i,s){let r=this;return this.getDependency("texture",i.index).then(function(n){if(!n)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((n=n.clone()).channel=i.texCoord),r.extensions[h.KHR_TEXTURE_TRANSFORM]){let e=void 0!==i.extensions?i.extensions[h.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=r.associations.get(n);n=r.extensions[h.KHR_TEXTURE_TRANSFORM].extendTexture(n,e),r.associations.set(n,t)}}return void 0!==s&&(n.colorSpace=s),e[t]=n,n})}assignFinalMaterial(e){let t=e.geometry,i=e.material,s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new n.PointsMaterial,(0,n.Material).prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){let e="LineBasicMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new n.LineBasicMaterial,(0,n.Material).prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,this.cache.add(e,t)),i=t}if(s||r||o){let e="ClonedMaterial:"+i.uuid+":";s&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}e.material=i}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(e){let t;let i=this,s=this.json,r=this.extensions,o=s.materials[e],a={},l=o.extensions||{},c=[];if(l[h.KHR_MATERIALS_UNLIT]){let e=r[h.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),c.push(e.extendParams(a,o,i))}else{let s=o.pbrMetallicRoughness||{};if(a.color=new n.Color(1,1,1),a.opacity=1,Array.isArray(s.baseColorFactor)){let e=s.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],n.LinearSRGBColorSpace),a.opacity=e[3]}void 0!==s.baseColorTexture&&c.push(i.assignTexture(a,"map",s.baseColorTexture,n.SRGBColorSpace)),a.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,a.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(c.push(i.assignTexture(a,"metalnessMap",s.metallicRoughnessTexture)),c.push(i.assignTexture(a,"roughnessMap",s.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===o.doubleSided&&(a.side=n.DoubleSide);let d=o.alphaMode||U.OPAQUE;if(d===U.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===U.MASK&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==n.MeshBasicMaterial&&(c.push(i.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new n.Vector2(1,1),void 0!==o.normalTexture.scale)){let e=o.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==o.occlusionTexture&&t!==n.MeshBasicMaterial&&(c.push(i.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==n.MeshBasicMaterial){let e=o.emissiveFactor;a.emissive=new(0,n.Color)().setRGB(e[0],e[1],e[2],n.LinearSRGBColorSpace)}return void 0!==o.emissiveTexture&&t!==n.MeshBasicMaterial&&c.push(i.assignTexture(a,"emissiveMap",o.emissiveTexture,n.SRGBColorSpace)),Promise.all(c).then(function(){let s=new t(a);return o.name&&(s.name=o.name),z(s,o),i.associations.set(s,{materials:e}),o.extensions&&K(r,s,o),s})}createUniqueName(e){let t=(0,n.PropertyBinding).sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,s=this.primitiveCache,r=[];for(let o=0,a=e.length;o<a;o++){let a=e[o],l=function(e){let t;let i=e.extensions&&e.extensions[h.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+X(i.attributes):e.indices+":"+X(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,s=e.targets.length;i<s;i++)t+=":"+X(e.targets[i]);return t}(a),c=s[l];if(c)r.push(c.promise);else{let e;e=a.extensions&&a.extensions[h.KHR_DRACO_MESH_COMPRESSION]?function(e){return i[h.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(i){return J(i,e,t)})}(a):J(new n.BufferGeometry,a,t),s[l]={primitive:a,promise:e},r.push(e)}}return Promise.all(r)}loadMesh(e){let t=this,i=this.json,s=this.extensions,r=i.meshes[e],a=r.primitives,l=[];for(let e=0,t=a.length;e<t;e++){var h;let t=void 0===a[e].material?(void 0===(h=this.cache).DefaultMaterial&&(h.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),h.DefaultMaterial):this.getDependency("material",a[e].material);l.push(t)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(i){let l=i.slice(0,i.length-1),h=i[i.length-1],c=[];for(let i=0,d=h.length;i<d;i++){let d;let u=h[i],p=a[i],m=l[i];if(p.mode===B.TRIANGLES||p.mode===B.TRIANGLE_STRIP||p.mode===B.TRIANGLE_FAN||void 0===p.mode)!0===(d=!0===r.isSkinnedMesh?new n.SkinnedMesh(u,m):new n.Mesh(u,m)).isSkinnedMesh&&d.normalizeSkinWeights(),p.mode===B.TRIANGLE_STRIP?d.geometry=o(d.geometry,n.TriangleStripDrawMode):p.mode===B.TRIANGLE_FAN&&(d.geometry=o(d.geometry,n.TriangleFanDrawMode));else if(p.mode===B.LINES)d=new n.LineSegments(u,m);else if(p.mode===B.LINE_STRIP)d=new n.Line(u,m);else if(p.mode===B.LINE_LOOP)d=new n.LineLoop(u,m);else if(p.mode===B.POINTS)d=new n.Points(u,m);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(d.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,s=t.weights.length;i<s;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){let i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,s=i.length;t<s;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(d,r),d.name=t.createUniqueName(r.name||"mesh_"+e),z(d,r),p.extensions&&K(s,d,p),t.assignFinalMaterial(d),c.push(d)}for(let i=0,s=c.length;i<s;i++)t.associations.set(c[i],{meshes:e,primitives:i});if(1===c.length)return r.extensions&&K(s,c[0],r),c[0];let d=new n.Group;r.extensions&&K(s,d,r),t.associations.set(d,{meshes:e});for(let e=0,t=c.length;e<t;e++)d.add(c[e]);return d})}loadCamera(e){let t;let i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===i.type?t=new n.PerspectiveCamera((0,n.MathUtils).radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new n.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),z(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let e=0,s=t.joints.length;e<s;e++)i.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(e){let i=e.pop(),s=[],r=[];for(let o=0,a=e.length;o<a;o++){let a=e[o];if(a){s.push(a);let e=new n.Matrix4;null!==i&&e.fromArray(i.array,16*o),r.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new n.Skeleton(s,r)})}loadAnimation(e){let t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],h=[],c=[];for(let e=0,t=s.channels.length;e<t;e++){let t=s.channels[e],i=s.samplers[t.sampler],r=t.target,n=r.node,d=void 0!==s.parameters?s.parameters[i.input]:i.input,u=void 0!==s.parameters?s.parameters[i.output]:i.output;void 0!==r.node&&(o.push(this.getDependency("node",n)),a.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",u)),h.push(i),c.push(r))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(h),Promise.all(c)]).then(function(e){let t=e[0],s=e[1],o=e[2],a=e[3],l=e[4],h=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],n=s[e],c=o[e],d=a[e],u=l[e];if(void 0===r)continue;r.updateMatrix&&r.updateMatrix();let p=i._createAnimationTracks(r,n,c,d,u);if(p)for(let e=0;e<p.length;e++)h.push(p[e])}return new n.AnimationClip(r,void 0,h)})}createNodeMesh(e){let t=this.json,i=this,s=t.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(e){let t=i._getNodeRef(i.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,i=s.weights.length;t<i;t++)e.morphTargetInfluences[t]=s.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],i=this._loadNodeShallow(e),s=[],r=t.children||[];for(let e=0,t=r.length;e<t;e++)s.push(this.getDependency("node",r[e]));let n=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([i,Promise.all(s),n]).then(function(e){let t=e[0],i=e[1],s=e[2];null!==s&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(s,W)});for(let e=0,s=i.length;e<s;e++)t.add(i[e]);return t})}_loadNodeShallow(e){let t=this.json,i=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&a.push(l),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then(function(e){return s._getNodeRef(s.cameraCache,r.camera,e)})),s._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if((a=!0===r.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D)!==t[0])for(let e=0,i=t.length;e<i;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),z(a,r),r.extensions&&K(i,a,r),void 0!==r.matrix){let e=new n.Matrix4;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],s=this,r=new n.Group;i.name&&(r.name=s.createUniqueName(i.name)),z(r,i),i.extensions&&K(t,r,i);let o=i.nodes||[],a=[];for(let e=0,t=o.length;e<t;e++)a.push(s.getDependency("node",o[e]));return Promise.all(a).then(function(e){for(let t=0,i=e.length;t<i;t++)r.add(e[t]);return s.associations=(e=>{let t=new Map;for(let[e,i]of s.associations)(e instanceof n.Material||e instanceof n.Texture)&&t.set(e,i);return e.traverse(e=>{let i=s.associations.get(e);null!=i&&t.set(e,i)}),t})(r),r})}_createAnimationTracks(e,t,i,s,r){let o;let a=[],l=e.name?e.name:e.uuid,h=[];switch(V[r.path]===V.weights?e.traverse(function(e){e.morphTargetInfluences&&h.push(e.name?e.name:e.uuid)}):h.push(l),V[r.path]){case V.weights:o=n.NumberKeyframeTrack;break;case V.rotation:o=n.QuaternionKeyframeTrack;break;case V.position:case V.scale:o=n.VectorKeyframeTrack;break;default:o=1===i.itemSize?n.NumberKeyframeTrack:n.VectorKeyframeTrack}let c=void 0!==s.interpolation?j[s.interpolation]:n.InterpolateLinear,d=this._getArrayFromAccessor(i);for(let e=0,i=h.length;e<i;e++){let i=new o(h[e]+"."+V[r.path],t.array,d,c);"CUBICSPLINE"===s.interpolation&&this._createCubicSplineTrackInterpolant(i),a.push(i)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=Y(t.constructor),i=new Float32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=t[s]*e;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof n.QuaternionKeyframeTrack?D:P)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function J(e,t,i){let s=t.attributes,r=[];for(let t in s){let n=G[t]||t.toLowerCase();n in e.attributes||r.push(function(t,s){return i.getDependency("accessor",t).then(function(t){e.setAttribute(s,t)})}(s[t],n))}if(void 0!==t.indices&&!e.index){let s=i.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(s)}return n.ColorManagement.workingColorSpace!==n.LinearSRGBColorSpace&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${n.ColorManagement.workingColorSpace}" not supported.`),z(e,t),!function(e,t,i){let s=t.attributes,r=new n.Box3;if(void 0===s.POSITION)return;{let e=i.json.accessors[s.POSITION],t=e.min,o=e.max;if(void 0!==t&&void 0!==o){if(r.set(new n.Vector3(t[0],t[1],t[2]),new n.Vector3(o[0],o[1],o[2])),e.normalized){let t=Y(N[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let o=t.targets;if(void 0!==o){let e=new n.Vector3,t=new n.Vector3;for(let s=0,r=o.length;s<r;s++){let r=o[s];if(void 0!==r.POSITION){let s=i.json.accessors[r.POSITION],n=s.min,o=s.max;if(void 0!==n&&void 0!==o){if(t.setX(Math.max(Math.abs(n[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(n[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(n[2]),Math.abs(o[2]))),s.normalized){let e=Y(N[s.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;let a=new n.Sphere;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,i),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,i){let s=!1,r=!1,n=!1;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(void 0!==i.POSITION&&(s=!0),void 0!==i.NORMAL&&(r=!0),void 0!==i.COLOR_0&&(n=!0),s&&r&&n)break}if(!s&&!r&&!n)return Promise.resolve(e);let o=[],a=[],l=[];for(let h=0,c=t.length;h<c;h++){let c=t[h];if(s){let t=void 0!==c.POSITION?i.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(r){let t=void 0!==c.NORMAL?i.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}if(n){let t=void 0!==c.COLOR_0?i.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(t){let i=t[0],o=t[1],a=t[2];return s&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=o),n&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e})}(e,t.targets,i):e})}var Q=s("ccy7r");class Z extends Q.Entity{constructor(e,t,i,s){super(e,"car"),this.followTarget=new n.Object3D,this.v=new n.Vector3,this.world=t,this.path=i,this.followTarget.position.set(0,1,0),this.pivot=s,this.updatables=[]}async init(e,t,i){await new a().loadAsync(this.path).then(s=>{this.geometry=s.scene.getObjectByName("body"),this.geometry.position.set(0,0,0),this.geometry.traverse(e=>e.castShadow=!0),this.geometry.add(this.followTarget);let o=s.scene.getObjectByName("wheel-back-left"),a=s.scene.getObjectByName("wheel-back-right"),l=s.scene.getObjectByName("wheel-front-left"),h=s.scene.getObjectByName("wheel-front-right");this.scene.add(this.geometry,o,a,l,h),this.rigidBody=this.world.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(...e).setCanSleep(!1));let c=this.world.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(i.x,i.y,i.z).setCanSleep(!1)),d=this.world.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(-i.x,i.y,i.z).setCanSleep(!1)),u=this.world.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(t.x,t.y,-t.z).setCanSleep(!1)),p=this.world.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(-t.x,t.y,-t.z).setCanSleep(!1)),m=new n.Vector3,g=[];this.geometry.updateMatrixWorld(!0),this.geometry.traverse(e=>{if("Mesh"!==e.type)return;let t=e.geometry.getAttribute("position");for(let i=0,s=t.count;i<s;i++)m.fromBufferAttribute(t,i),m.applyMatrix4(e.parent.matrixWorld),g.push(...m)});let f=(0,r.ColliderDesc).convexMesh(new Float32Array(g)).setMass(1).setRestitution(.5).setFriction(3).setCollisionGroups(131073),A=(0,r.ColliderDesc).cylinder(.175,.3).setRotation(new(0,n.Quaternion)().setFromAxisAngle(new n.Vector3(0,0,1),-Math.PI/2)).setTranslation(.1,0,0).setRestitution(.5).setFriction(2).setCollisionGroups(262145),v=(0,r.ColliderDesc).cylinder(.175,.3).setRotation(new(0,n.Quaternion)().setFromAxisAngle(new n.Vector3(0,0,1),Math.PI/2)).setTranslation(-.1,0,0).setRestitution(.5).setFriction(2).setCollisionGroups(262145),w=(0,r.ColliderDesc).cylinder(.175,.3).setRotation(new(0,n.Quaternion)().setFromAxisAngle(new n.Vector3(0,0,1),Math.PI/2)).setTranslation(.1,0,0).setRestitution(.5).setFriction(2.5).setCollisionGroups(262145),x=(0,r.ColliderDesc).cylinder(.175,.3).setRotation(new(0,n.Quaternion)().setFromAxisAngle(new n.Vector3(0,0,1),Math.PI/2)).setTranslation(-.1,0,0).setRestitution(.5).setFriction(2.5).setCollisionGroups(262145);this.world.createImpulseJoint((0,r.JointData).revolute(new n.Vector3(i.x,i.y,i.z),new n.Vector3(0,0,0),new n.Vector3(-1,0,0)),this.rigidBody,c,!0),this.world.createImpulseJoint((0,r.JointData).revolute(new n.Vector3(-i.x,i.y,i.z),new n.Vector3(0,0,0),new n.Vector3(-1,0,0)),this.rigidBody,d,!0),this.world.createImpulseJoint((0,r.JointData).revolute(new n.Vector3(t.x,t.y,-t.z),new n.Vector3(0,0,0),new n.Vector3(1,0,0)),this.rigidBody,u,!0),this.world.createImpulseJoint((0,r.JointData).revolute(new n.Vector3(-t.x,t.y,-t.z),new n.Vector3(0,0,0),new n.Vector3(1,0,0)),this.rigidBody,p,!0),this.world.createCollider(f,this.rigidBody),this.world.createCollider(A,c),this.world.createCollider(v,d),this.world.createCollider(w,u),this.world.createCollider(x,p),this.updatables.push([this.geometry,this.rigidBody]),this.updatables.push([o,c]),this.updatables.push([a,d]),this.updatables.push([l,u]),this.updatables.push([h,p])})}update(e){this.followTarget.getWorldPosition(this.v),this.pivot&&this.pivot.position.lerp(this.v,5*e);let t=this.updatables.length;for(let e=0;e<t;e++)this.updatables[e][0].position.copy(this.updatables[e][1].translation()),this.updatables[e][0].quaternion.copy(this.updatables[e][1].rotation());return this}}var Q=s("ccy7r"),n=s("ilwiq");class ee{constructor(e,t){this.enabled=!0,this.world=t,this.mesh=new n.LineSegments(new n.BufferGeometry,new n.LineBasicMaterial({color:16777215,vertexColors:!0})),this.mesh.frustumCulled=!1,e.add(this.mesh)}update(){if(this.enabled){let{vertices:e,colors:t}=this.world.debugRender();this.mesh.geometry.setAttribute("position",new n.BufferAttribute(e,3)),this.mesh.geometry.setAttribute("color",new n.BufferAttribute(t,4)),this.mesh.visible=!0}else this.mesh.visible=!1}}var r=s("2LLMu"),n=s("ilwiq"),et=s("5Rd1x"),n=s("ilwiq");const ei=new n.Euler(0,0,0,"YXZ"),es=new n.Vector3,er={type:"change"},en={type:"lock"},eo={type:"unlock"},ea=Math.PI/2;class el extends n.EventDispatcher{constructor(e,t){super(),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=eh.bind(this),this._onPointerlockChange=ec.bind(this),this._onPointerlockError=ed.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(e){let t=this.camera;es.setFromMatrixColumn(t.matrix,0),es.crossVectors(t.up,es),t.position.addScaledVector(es,e)}moveRight(e){let t=this.camera;es.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(es,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function eh(e){if(!1===this.isLocked)return;let t=e.movementX||e.mozMovementX||e.webkitMovementX||0,i=e.movementY||e.mozMovementY||e.webkitMovementY||0,s=this.camera;ei.setFromQuaternion(s.quaternion),ei.y-=.002*t*this.pointerSpeed,ei.x-=.002*i*this.pointerSpeed,ei.x=Math.max(ea-this.maxPolarAngle,Math.min(ea-this.minPolarAngle,ei.x)),s.quaternion.setFromEuler(ei),this.dispatchEvent(er)}function ec(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(en),this.isLocked=!0):(this.dispatchEvent(eo),this.isLocked=!1)}function ed(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}var eu=s("7MGRS"),n=s("ilwiq"),et=s("5Rd1x");/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class ep{constructor(e,t,i,s,r="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),ep.nextNameID=ep.nextNameID||0,this.$name.id="lil-gui-name-"+ ++ep.nextNameID,this.$widget=document.createElement(r),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){let t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class em extends ep{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function eg(e){let t,i;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?i=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!i&&"#"+i}const ef={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},eA={isPrimitive:!1,match:Array.isArray,fromHexString(e,t,i=1){let s=ef.fromHexString(e);t[0]=(s>>16&255)/255*i,t[1]=(s>>8&255)/255*i,t[2]=(255&s)/255*i},toHexString:([e,t,i],s=1)=>ef.toHexString(e*(s=255/s)<<16^t*s<<8^i*s<<0)},ev={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,i=1){let s=ef.fromHexString(e);t.r=(s>>16&255)/255*i,t.g=(s>>8&255)/255*i,t.b=(255&s)/255*i},toHexString:({r:e,g:t,b:i},s=1)=>ef.toHexString(e*(s=255/s)<<16^t*s<<8^i*s<<0)},ew=[{isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:eg,toHexString:eg},ef,eA,ev];class ex extends ep{constructor(e,t,i,s){var r;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(r=this.initialValue,ew.find(e=>e.match(r))),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let e=eg(this.$text.value);e&&this._setValueFromHexString(e)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){let t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class eb extends ep{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",e=>{e.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class ey extends ep{constructor(e,t,i,s,r,n){super(e,t,i,"number"),this._initInput(),this.min(s),this.max(r);let o=void 0!==n;this.step(o?n:this._getImplicitStep(),o),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){let e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;let e=e=>{let t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())},t,i,s,r,n,o=!1,a=e=>{if(o){let s=e.clientX-t;Math.abs(e.clientY-i)>5?(e.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(s)>5&&l()}if(!o){let t=e.clientY-s;n-=t*this._step*this._arrowKeyMultiplier(e),r+n>this._max?n=this._max-r:r+n<this._min&&(n=this._min-r),this._snapClampSetValue(r+n)}s=e.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{let e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))}),this.$input.addEventListener("keydown",t=>{"Enter"===t.code&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(-(this._step*this._arrowKeyMultiplier(t)*1)))}),this.$input.addEventListener("wheel",t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))},{passive:!1}),this.$input.addEventListener("mousedown",e=>{t=e.clientX,i=s=e.clientY,o=!0,r=this.getValue(),n=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){let e;this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=e=>{var t,i,s;let r=this.$slider.getBoundingClientRect(),n=(t=r.left,i=r.right,s=this._min,(e-t)/(i-t)*(this._max-s)+s);this._snapClampSetValue(n)},i=e=>{t(e.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)},r,n,o=!1,a=e=>{e.preventDefault(),this._setDraggingStyle(!0),t(e.touches[0].clientX),o=!1},l=e=>{o?Math.abs(e.touches[0].clientX-r)>Math.abs(e.touches[0].clientY-n)?a(e):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",h)):(e.preventDefault(),t(e.touches[0].clientX))},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",h)},c=this._callOnFinishChange.bind(this);this.$slider.addEventListener("mousedown",e=>{this._setDraggingStyle(!0),t(e.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",e=>{e.touches.length>1||(this._hasScrollBar?(r=e.touches[0].clientX,n=e.touches[0].clientY,o=!0):a(e),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",h))},{passive:!1}),this.$slider.addEventListener("wheel",t=>{if(Math.abs(t.deltaX)<Math.abs(t.deltaY)&&this._hasScrollBar)return;t.preventDefault();let i=this._normalizeMouseWheel(t)*this._step;this._snapClampSetValue(this.getValue()+i),this.$input.value=this.getValue(),clearTimeout(e),e=setTimeout(c,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120*(this._stepExplicit?1:10)),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){return parseFloat((Math.round(e/this._step)*this._step).toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){let e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class eE extends ep{constructor(e,t,i,s){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(s)?s:Object.values(s),this._names=Array.isArray(s)?s:Object.keys(s),this._names.forEach(e=>{let t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class e_ extends ep{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",e=>{"Enter"===e.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let eT=!1;class eR{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:s,title:r="Controls",injectStyles:n=!0,touchStyles:o=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(r),o&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!eT&&n&&(function(e){let t=document.createElement("style");t.innerHTML=e;let i=document.querySelector("head link[rel=stylesheet], head style");i?document.head.insertBefore(t,i):document.head.appendChild(t)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),eT=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this.domElement.addEventListener("keydown",e=>e.stopPropagation()),this.domElement.addEventListener("keyup",e=>e.stopPropagation())}add(e,t,i,s,r){if(Object(i)===i)return new eE(this,e,t,i);let n=e[t];switch(typeof n){case"number":return new ey(this,e,t,i,s,r);case"boolean":return new em(this,e,t);case"string":return new e_(this,e,t);case"function":return new eb(this,e,t)}console.error("gui.add failed\n	property:",t,"\n	object:",e,"\n	value:",n)}addColor(e,t,i=1){return new ex(this,e,t,i)}addFolder(e){return new eR({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof eb||t._name in e.controllers&&t.load(e.controllers[t._name])}),t&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){let t={controllers:{},folders:{}};return this.controllers.forEach(e=>{if(!(e instanceof eb)){if(e._name in t.controllers)throw Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}}),e&&this.folders.forEach(e=>{if(e._title in t.folders)throw Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");let i=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const eL=[];let eS={showAxis:!0};const eM={camera:"pointerLock",cameraPos:[0,0,4],fov:75,lightType:"directional"};async function eC(e,t,i,s){let o=new n.Mesh(new n.BoxGeometry(100,1,100),new n.MeshPhongMaterial);o.receiveShadow=!0,o.position.y=-1;let a=i.createRigidBody((0,r.RigidBodyDesc).fixed().setTranslation(0,-1,0)),l=(0,r.ColliderDesc).cuboid(50,.5,50);i.createCollider(l,a);let h=new Q.RenderableEntity(t,i,o,"floor",a);h.addToScene(),e.push(h);let c=new Z(t,i,"./models/sedan-sports.glb",s);await c.init([0,0,0],new n.Vector3(.3,0,-.66),new n.Vector3(.3,0,-.66)),e.push(c)}(0,r.init)().then(async()=>{let e;let{world:t,scene:i,camera:s,controls:o,renderer:a,pivot:l,stats:h}=function(e={},t){let i,s;let o={camera:"orbit",cameraPos:[0,2,5],fov:50,lightType:"spot",...t},a=null,l=new r.World({x:0,y:-9.81,z:0}),h=new n.Scene;"spot"===o.lightType?((i=new n.SpotLight(void 0,10*Math.PI)).angle=Math.PI/3,i.penumbra=.5):((i=new n.DirectionalLight(16777215,.5)).shadow.camera.near=.5,i.shadow.camera.far=1500),i.shadow.blurSamples=10,i.shadow.radius=5,i.position.set(2.5,5,5),i.castShadow=!0,h.add(i);let c=new n.PerspectiveCamera(o.fov,window.innerWidth/window.innerHeight,.1,100);c.position.set(...o.cameraPos);let d=new n.WebGLRenderer({antialias:!0});if(d.setSize(window.innerWidth,window.innerHeight),d.shadowMap.enabled=!0,d.shadowMap.type=n.VSMShadowMap,document.body.appendChild(d.domElement),window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}),"orbit"===o.camera)(s=new et.OrbitControls(c,d.domElement)).enableDamping=!0,s.target.y=1;else{s=new el(c,d.domElement),document.addEventListener("click",()=>{s instanceof el&&s.lock()},!1),a=new n.Object3D;let t=new n.Object3D,i=new n.Object3D;function u(e){t.rotation.y-=.002*e.movementX;let s=i.rotation.x-.002*e.movementY;s>-1&&s<.1&&(i.rotation.x=s),a&&c.lookAt(a.position)}function p(e){e.preventDefault();let t=c.position.z+.005*e.deltaY;t>=1&&t<=10&&(c.position.z=t)}h.add(a),a.add(t),t.add(i),i.add(c),t.rotateY(.6);let r=t=>{e[t.code]="keydown"===t.type};document.addEventListener("click",()=>{d.domElement.requestPointerLock()}),document.addEventListener("pointerlockchange",()=>{document.pointerLockElement===d.domElement?(document.addEventListener("keydown",r),document.addEventListener("keyup",r),d.domElement.addEventListener("mousemove",u),d.domElement.addEventListener("wheel",p)):(document.removeEventListener("keydown",r),document.removeEventListener("keyup",r),d.domElement.removeEventListener("mousemove",u),d.domElement.removeEventListener("wheel",p))})}let m=new eu.default;return document.body.appendChild(m.dom),{world:l,scene:h,renderer:d,camera:c,controls:s,stats:m,pivot:a}}({},eM);await eC(eL,i,t,l);let c=new ee(i,t),d=new n.AxesHelper(3);eS.showAxis&&i.add(d);let u=new n.Clock,p=new eR;p.add(c,"enabled").name("Rapier Degug Renderer"),p.add(eS,"showAxis").name("Show Axis").onChange(e=>{e?i.add(d):i.remove(d)}),window.requestAnimationFrame(function r(){for(let i of(e=u.getDelta(),t.timestep=Math.min(e,.1),t.step(),eL))i.update(t.timestep);o instanceof et.OrbitControls&&o.update(),c.update(),a.render(i,s),h.update(),window.requestAnimationFrame(r)})});
//# sourceMappingURL=basic-car.ca26117b.js.map
