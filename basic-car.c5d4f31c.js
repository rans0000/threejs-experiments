var e=globalThis,t={},i={},n=e.parcelRequire03bf;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},e.parcelRequire03bf=n),n.register;var r=(n("2LLMu"),n("2LLMu")),o=n("ilwiq"),a=n("ccy7r");class d extends a.Entity{constructor(e,t){super(e,"car"),this.world=t;let{geometry:i,rigidbody:n}=this.createCar(t);this.geometry=i,this.rigidBody=n}createCar(e){let t=new o.Mesh(new o.BoxGeometry(1,1,1),new o.MeshNormalMaterial);t.castShadow=!0;let i=e.createRigidBody((0,r.RigidBodyDesc).dynamic().setTranslation(0,.5,0).setCanSleep(!1)),n=(0,r.ColliderDesc).cuboid(.5,.5,.5).setMass(1).setRestitution(.2);return e.createCollider(n,i),{geometry:t,rigidbody:i}}update(){let e=this.rigidBody.translation();return this.geometry.position.set(e.x,e.y,e.z),e=this.rigidBody.rotation(),this.geometry.quaternion.copy(new o.Quaternion(e.x,e.y,e.z)),this}}var a=n("ccy7r"),r=n("2LLMu"),o=n("ilwiq"),s=n("5Rd1x"),o=n("ilwiq");const l=[];(0,r.init)().then(()=>{let e;let{world:t,scene:i,camera:n,controls:w,renderer:c}=function(){let e=new r.World({x:0,y:-9.81,z:0}),t=new o.Scene,i=new o.SpotLight(void 0,10*Math.PI);i.position.set(2.5,5,5),i.angle=Math.PI/3,i.penumbra=.5,i.castShadow=!0,i.shadow.blurSamples=10,i.shadow.radius=5,t.add(i);let n=new o.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,100);n.position.set(0,2,5);let a=new o.WebGLRenderer({antialias:!0});a.setSize(window.innerWidth,window.innerHeight),a.shadowMap.enabled=!0,a.shadowMap.type=o.VSMShadowMap,document.body.appendChild(a.domElement),window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)});let d=new s.OrbitControls(n,a.domElement);return d.enableDamping=!0,d.target.y=1,{world:e,scene:t,renderer:a,camera:n,controls:d}}();!function(e,t,i){let n=new o.Mesh(new o.BoxGeometry(100,1,100),new o.MeshPhongMaterial);n.receiveShadow=!0,n.position.y=-1;let s=i.createRigidBody((0,r.RigidBodyDesc).fixed().setTranslation(0,-1,0)),l=(0,r.ColliderDesc).cuboid(50,.5,50);i.createCollider(l,s);let w=new a.RenderableEntity(t,i,n,"floor",s);w.addToScene(),e.push(w);let c=new d(t,i);c.addToScene(),e.push(c)}(l,i,t);let h=new o.Clock;window.requestAnimationFrame(function r(){for(let i of(e=h.getDelta(),t.timestep=Math.min(e,.1),t.step(),l))i.update();w.update(),c.render(i,n),window.requestAnimationFrame(r)})});
//# sourceMappingURL=basic-car.c5d4f31c.js.map
